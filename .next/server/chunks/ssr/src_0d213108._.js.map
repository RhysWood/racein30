{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/rhyswood/dev/racein30/src/utils/localStorage.js"],"sourcesContent":["export const hasVoted = (raceId) => {\n  if (typeof window === 'undefined') return false;\n  const votes = JSON.parse(localStorage.getItem('raceVotes') || '{}');\n  return !!votes[raceId];\n};\n\nexport const saveVote = (raceId, voteType) => {\n  if (typeof window === 'undefined') return;\n  const votes = JSON.parse(localStorage.getItem('raceVotes') || '{}');\n  votes[raceId] = voteType;\n  localStorage.setItem('raceVotes', JSON.stringify(votes));\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,WAAW,CAAC;IACvB,wCAAmC,OAAO;;IAC1C,MAAM;AAER;AAEO,MAAM,WAAW,CAAC,QAAQ;IAC/B,wCAAmC;;IACnC,MAAM;AAGR","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///Users/rhyswood/dev/racein30/src/app/components/LoadingSkeleton.jsx"],"sourcesContent":["const LoadingSkeleton = () => {\n  return (\n    <div className=\"w-full animate-pulse space-y-4\">\n      <div className=\"h-8 bg-gray-200 rounded-full w-full\" />\n      <div className=\"flex justify-center gap-4\">\n        <div className=\"h-14 w-32 bg-gray-200 rounded-2xl\" />\n        <div className=\"h-14 w-32 bg-gray-200 rounded-2xl\" />\n      </div>\n    </div>\n  );\n};\n\nexport default LoadingSkeleton;\n"],"names":[],"mappings":";;;;;AAAA,MAAM,kBAAkB;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;uCAEe","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/rhyswood/dev/racein30/src/app/components/voting/VoteButtons.jsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { hasVoted, saveVote } from '../../../utils/localStorage';\nimport LoadingSkeleton from '../LoadingSkeleton';\n\nexport default function VoteButtons({ raceId, onVoteComplete }) {\n  const [selected, setSelected] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Check if user has already voted and get their vote type\n    const previousVote = hasVoted(raceId);\n    if (previousVote) {\n      setSelected(previousVote); // Will be either 'full' or '30'\n    }\n  }, [raceId]);\n\n  const handleVote = async (voteType) => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const response = await fetch('/api/vote', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          raceId,\n          voteType: voteType === 'full' ? 'fullRace' : 'raceIn30'\n        }),\n      });\n\n      if (!response.ok) throw new Error('Vote failed');\n      \n      saveVote(raceId, voteType);\n      setSelected(voteType);\n      onVoteComplete?.();\n    } catch (err) {\n      setError('Failed to submit vote. Please try again.');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (isLoading) {\n    return <LoadingSkeleton />;\n  }\n\n  return (\n    <div className=\"flex flex-col items-center space-y-6\">\n      <h2 className=\"text-2xl font-bold text-center\">How was the race?</h2>\n      <div className=\"flex gap-6\">\n        {/* Race in 30 Button */}\n        <div className=\"relative group\">\n          <button\n            onClick={() => handleVote('30')}\n            disabled={isLoading || selected}\n            className={`px-6 py-4 rounded-2xl text-white text-lg font-semibold transition-all duration-200 ease-in-out\n              bg-gray-800 hover:bg-gray-700 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\n              ${selected === '30' ? 'ring-4 ring-blue-400' : ''}`}\n          >\n            Race in 30\n          </button>\n          <span className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-150\">\n            ðŸ˜´\n          </span>\n        </div>\n\n        {/* Full Race Replay Button */}\n        <div className=\"relative group\">\n          <button\n            onClick={() => handleVote('full')}\n            disabled={isLoading || selected}\n            className={`px-6 py-4 rounded-2xl text-white text-lg font-semibold transition-all duration-200 ease-in-out\n              bg-red-600 hover:bg-red-500 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\n              ${selected === 'full' ? 'ring-4 ring-green-400' : ''}`}\n          >\n            Full Race Replay\n          </button>\n          <span className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-150\">\n            ðŸ”¥\n          </span>\n        </div>\n      </div>\n\n      {error && (\n        <p className=\"text-red-500 mt-4 text-sm\">{error}</p>\n      )}\n\n      {selected && !error && (\n        <p className=\"text-green-500 mt-4 text-sm\">\n          Thanks for voting for the <strong>{selected === 'full' ? 'Full Race' : 'Race in 30'}</strong>!\n        </p>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,YAAY,EAAE,MAAM,EAAE,cAAc,EAAE;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,0DAA0D;QAC1D,MAAM,eAAe,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD,EAAE;QAC9B,IAAI,cAAc;YAChB,YAAY,eAAe,gCAAgC;QAC7D;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,aAAa,OAAO;QACxB,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,aAAa;gBACxC,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA,UAAU,aAAa,SAAS,aAAa;gBAC/C;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;YAElC,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ;YACjB,YAAY;YACZ;QACF,EAAE,OAAO,KAAK;YACZ,SAAS;YACT,QAAQ,KAAK,CAAC;QAChB,SAAU;YACR,aAAa;QACf;IACF;IAEA,IAAI,WAAW;QACb,qBAAO,8OAAC,4IAAA,CAAA,UAAe;;;;;IACzB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAiC;;;;;;0BAC/C,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,IAAM,WAAW;gCAC1B,UAAU,aAAa;gCACvB,WAAW,CAAC;;cAEV,EAAE,aAAa,OAAO,yBAAyB,IAAI;0CACtD;;;;;;0CAGD,8OAAC;gCAAK,WAAU;0CAA+J;;;;;;;;;;;;kCAMjL,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,IAAM,WAAW;gCAC1B,UAAU,aAAa;gCACvB,WAAW,CAAC;;cAEV,EAAE,aAAa,SAAS,0BAA0B,IAAI;0CACzD;;;;;;0CAGD,8OAAC;gCAAK,WAAU;0CAA+J;;;;;;;;;;;;;;;;;;YAMlL,uBACC,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;YAG3C,YAAY,CAAC,uBACZ,8OAAC;gBAAE,WAAU;;oBAA8B;kCACf,8OAAC;kCAAQ,aAAa,SAAS,cAAc;;;;;;oBAAsB;;;;;;;;;;;;;AAKvG","debugId":null}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///Users/rhyswood/dev/racein30/src/app/components/voting/VotingStats.jsx"],"sourcesContent":["'use client';\n\nconst VotingStats = ({ votes }) => {\n  const { fullRace, raceIn30 } = votes;\n  const totalVotes = fullRace + raceIn30;\n  const fullRacePercentage = totalVotes ? (fullRace / totalVotes) * 100 : 0;\n  const raceIn30Percentage = totalVotes ? (raceIn30 / totalVotes) * 100 : 0;\n\n  return (\n    <div className=\"w-full max-w-md\">\n      <div className=\"text-center mb-2 text-sm text-gray-500\">\n        {totalVotes ? `Total Votes: ${totalVotes}` : 'No votes yet'}\n      </div>\n      \n      <div className=\"relative h-8 rounded-full overflow-hidden group border border-gray-200\">\n        {totalVotes > 0 ? (\n          <>\n            <div \n              className=\"absolute h-full bg-red-500 transition-all duration-300\"\n              style={{ width: `${fullRacePercentage}%` }}\n            />\n            <div \n              className=\"absolute h-full bg-blue-500 transition-all duration-300\"\n              style={{ width: `${raceIn30Percentage}%`, left: `${fullRacePercentage}%` }}\n            />\n          </>\n        ) : (\n          <div className=\"absolute inset-0 bg-gray-100\" />\n        )}\n        \n        <div className=\"opacity-0 group-hover:opacity-100 absolute inset-0 flex items-center justify-center text-sm font-medium transition-opacity duration-200 bg-black/20\">\n          {totalVotes > 0 ? (\n            <>\n              <span className=\"px-2 text-white\">\n                Full Race: {Math.round(fullRacePercentage)}%\n              </span>\n              <span className=\"px-2 border-l border-white/20 text-white\">\n                Race in 30: {Math.round(raceIn30Percentage)}%\n              </span>\n            </>\n          ) : (\n            <span className=\"text-gray-600\">\n              Be the first to vote!\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VotingStats;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,CAAC,EAAE,KAAK,EAAE;IAC5B,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG;IAC/B,MAAM,aAAa,WAAW;IAC9B,MAAM,qBAAqB,aAAa,AAAC,WAAW,aAAc,MAAM;IACxE,MAAM,qBAAqB,aAAa,AAAC,WAAW,aAAc,MAAM;IAExE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACZ,aAAa,CAAC,aAAa,EAAE,YAAY,GAAG;;;;;;0BAG/C,8OAAC;gBAAI,WAAU;;oBACZ,aAAa,kBACZ;;0CACE,8OAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,OAAO,GAAG,mBAAmB,CAAC,CAAC;gCAAC;;;;;;0CAE3C,8OAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,OAAO,GAAG,mBAAmB,CAAC,CAAC;oCAAE,MAAM,GAAG,mBAAmB,CAAC,CAAC;gCAAC;;;;;;;qDAI7E,8OAAC;wBAAI,WAAU;;;;;;kCAGjB,8OAAC;wBAAI,WAAU;kCACZ,aAAa,kBACZ;;8CACE,8OAAC;oCAAK,WAAU;;wCAAkB;wCACpB,KAAK,KAAK,CAAC;wCAAoB;;;;;;;8CAE7C,8OAAC;oCAAK,WAAU;;wCAA2C;wCAC5C,KAAK,KAAK,CAAC;wCAAoB;;;;;;;;yDAIhD,8OAAC;4BAAK,WAAU;sCAAgB;;;;;;;;;;;;;;;;;;;;;;;AAQ5C;uCAEe","debugId":null}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///Users/rhyswood/dev/racein30/src/app/components/voting/TheRace.jsx"],"sourcesContent":["'use client';\nimport React, { useEffect, useState } from 'react';\nimport VoteButtons from './VoteButtons';\nimport VotingStats from './VotingStats';\n\nconst TheRace = () => {\n  const [currentRace, setCurrentRace] = useState(null);\n\n  useEffect(() => {\n    const getCurrentRace = async () => {\n      try {\n        const response = await fetch('/api/current-race');\n        const data = await response.json();\n        setCurrentRace(data);\n      } catch (error) {\n        console.error('Error fetching current race:', error);\n      }\n    };\n\n    getCurrentRace();\n  }, []);\n\n  if (!currentRace) return <div>Loading...</div>;\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      month: 'long',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <div className=\"w-full flex flex-col items-center text-center mb-6\">\n      <h1 className=\"text-3xl font-extrabold text-black tracking-tight\">\n        {currentRace.race}\n      </h1>\n      <p className=\"text-sm text-gray-400 mt-1\">\n        {formatDate(currentRace.date)}\n      </p>\n      <div className=\"mt-6 mb-8 w-full\">\n        <VotingStats votes={currentRace.votes} />\n      </div>\n      <VoteButtons raceId={currentRace._id} />\n    </div>\n  );\n};\n\nexport default TheRace;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,UAAU;IACd,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,iBAAiB;YACrB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,eAAe;YACjB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;YAChD;QACF;QAEA;IACF,GAAG,EAAE;IAEL,IAAI,CAAC,aAAa,qBAAO,8OAAC;kBAAI;;;;;;IAE9B,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,OAAO;YACP,KAAK;QACP;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BACX,YAAY,IAAI;;;;;;0BAEnB,8OAAC;gBAAE,WAAU;0BACV,WAAW,YAAY,IAAI;;;;;;0BAE9B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,kJAAA,CAAA,UAAW;oBAAC,OAAO,YAAY,KAAK;;;;;;;;;;;0BAEvC,8OAAC,kJAAA,CAAA,UAAW;gBAAC,QAAQ,YAAY,GAAG;;;;;;;;;;;;AAG1C;uCAEe","debugId":null}}]
}